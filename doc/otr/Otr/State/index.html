<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>State (otr.Otr.State)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">otr</a> &#x00BB; <a href="../index.html">Otr</a> &#x00BB; State</nav><header class="odoc-preamble"><h1>Module <code><span>Otr.State</span></code></h1><p>States and types</p></header><nav class="odoc-toc"><ul><li><a href="#type-definitions-and-predicates">Type definitions and predicates</a></li></ul></nav><div class="odoc-content"><h3 id="type-definitions-and-predicates"><a href="#type-definitions-and-predicates" class="anchor"></a>Type definitions and predicates</h3><div class="odoc-spec"><div class="spec type" id="type-ret" class="anchored"><a href="#type-ret" class="anchor"></a><code><span><span class="keyword">type</span> ret</span><span> = </span><span>[ </span></code><table><tr id="type-ret.Warning" class="anchored"><td class="def constructor"><a href="#type-ret.Warning" class="anchor"></a><code><span>| </span></code><code><span>`Warning <span class="keyword">of</span> string</span></code></td></tr><tr id="type-ret.Received_error" class="anchored"><td class="def constructor"><a href="#type-ret.Received_error" class="anchor"></a><code><span>| </span></code><code><span>`Received_error <span class="keyword">of</span> string</span></code></td></tr><tr id="type-ret.Received" class="anchored"><td class="def constructor"><a href="#type-ret.Received" class="anchor"></a><code><span>| </span></code><code><span>`Received <span class="keyword">of</span> string</span></code></td></tr><tr id="type-ret.Established_encrypted_session" class="anchored"><td class="def constructor"><a href="#type-ret.Established_encrypted_session" class="anchor"></a><code><span>| </span></code><code><span>`Established_encrypted_session <span class="keyword">of</span> string</span></code></td></tr><tr id="type-ret.Received_encrypted" class="anchored"><td class="def constructor"><a href="#type-ret.Received_encrypted" class="anchor"></a><code><span>| </span></code><code><span>`Received_encrypted <span class="keyword">of</span> string</span></code></td></tr><tr id="type-ret.SMP_awaiting_secret" class="anchored"><td class="def constructor"><a href="#type-ret.SMP_awaiting_secret" class="anchor"></a><code><span>| </span></code><code><span>`SMP_awaiting_secret</span></code></td></tr><tr id="type-ret.SMP_received_question" class="anchored"><td class="def constructor"><a href="#type-ret.SMP_received_question" class="anchor"></a><code><span>| </span></code><code><span>`SMP_received_question <span class="keyword">of</span> string</span></code></td></tr><tr id="type-ret.SMP_success" class="anchored"><td class="def constructor"><a href="#type-ret.SMP_success" class="anchor"></a><code><span>| </span></code><code><span>`SMP_success</span></code></td></tr><tr id="type-ret.SMP_failure" class="anchored"><td class="def constructor"><a href="#type-ret.SMP_failure" class="anchor"></a><code><span>| </span></code><code><span>`SMP_failure</span></code></td></tr></table><code><span> ]</span></code></div><div class="spec-doc"><p>Return values of functions in the <a href="../Engine/index.html"><code>Engine</code></a> module.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-policy" class="anchored"><a href="#type-policy" class="anchor"></a><code><span><span class="keyword">type</span> policy</span><span> = </span><span>[ </span></code><table><tr id="type-policy.REQUIRE_ENCRYPTION" class="anchored"><td class="def constructor"><a href="#type-policy.REQUIRE_ENCRYPTION" class="anchor"></a><code><span>| </span></code><code><span>`REQUIRE_ENCRYPTION</span></code></td></tr><tr id="type-policy.SEND_WHITESPACE_TAG" class="anchored"><td class="def constructor"><a href="#type-policy.SEND_WHITESPACE_TAG" class="anchor"></a><code><span>| </span></code><code><span>`SEND_WHITESPACE_TAG</span></code></td></tr><tr id="type-policy.WHITESPACE_START_AKE" class="anchored"><td class="def constructor"><a href="#type-policy.WHITESPACE_START_AKE" class="anchor"></a><code><span>| </span></code><code><span>`WHITESPACE_START_AKE</span></code></td></tr><tr id="type-policy.ERROR_START_AKE" class="anchored"><td class="def constructor"><a href="#type-policy.ERROR_START_AKE" class="anchor"></a><code><span>| </span></code><code><span>`ERROR_START_AKE</span></code></td></tr><tr id="type-policy.REVEAL_MACS" class="anchored"><td class="def constructor"><a href="#type-policy.REVEAL_MACS" class="anchor"></a><code><span>| </span></code><code><span>`REVEAL_MACS</span></code></td></tr></table><code><span> ]</span></code></div><div class="spec-doc"><p>OTR policies, as defined in the protocol.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-sexp_of_policy" class="anchored"><a href="#val-sexp_of_policy" class="anchor"></a><code><span><span class="keyword">val</span> sexp_of_policy : <span><a href="#type-policy">policy</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Sexplib0</span>.Sexp.t</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-policy_of_sexp" class="anchored"><a href="#val-policy_of_sexp" class="anchor"></a><code><span><span class="keyword">val</span> policy_of_sexp : <span><span class="xref-unresolved">Sexplib0</span>.Sexp.t <span class="arrow">&#45;&gt;</span></span> <a href="#type-policy">policy</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-policy_to_string" class="anchored"><a href="#val-policy_to_string" class="anchor"></a><code><span><span class="keyword">val</span> policy_to_string : <span><a href="#type-policy">policy</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>policy_to_string policy</code> is <code>string</code>, the string representation of the given <code>policy</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-string_to_policy" class="anchored"><a href="#val-string_to_policy" class="anchor"></a><code><span><span class="keyword">val</span> string_to_policy : <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-policy">policy</a> option</span></span></code></div><div class="spec-doc"><p><code>string_to_policy string</code> is <code>policy</code>, the <code>policy</code> matching the string (<code>None</code> if none matches).</p></div></div><div class="odoc-spec"><div class="spec value" id="val-all_policies" class="anchored"><a href="#val-all_policies" class="anchor"></a><code><span><span class="keyword">val</span> all_policies : <span><a href="#type-policy">policy</a> list</span></span></code></div><div class="spec-doc"><p><code>all_policies</code> returns a list of all defined policies.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-version" class="anchored"><a href="#type-version" class="anchor"></a><code><span><span class="keyword">type</span> version</span><span> = </span><span>[ </span></code><table><tr id="type-version.V2" class="anchored"><td class="def constructor"><a href="#type-version.V2" class="anchor"></a><code><span>| </span></code><code><span>`V2</span></code></td></tr><tr id="type-version.V3" class="anchored"><td class="def constructor"><a href="#type-version.V3" class="anchor"></a><code><span>| </span></code><code><span>`V3</span></code></td></tr></table><code><span> ]</span></code></div><div class="spec-doc"><p>OTR protocol versions supported by this library</p></div></div><div class="odoc-spec"><div class="spec value" id="val-sexp_of_version" class="anchored"><a href="#val-sexp_of_version" class="anchor"></a><code><span><span class="keyword">val</span> sexp_of_version : <span><a href="#type-version">version</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Sexplib0</span>.Sexp.t</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-version_of_sexp" class="anchored"><a href="#val-version_of_sexp" class="anchor"></a><code><span><span class="keyword">val</span> version_of_sexp : <span><span class="xref-unresolved">Sexplib0</span>.Sexp.t <span class="arrow">&#45;&gt;</span></span> <a href="#type-version">version</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-version_to_string" class="anchored"><a href="#val-version_to_string" class="anchor"></a><code><span><span class="keyword">val</span> version_to_string : <span><a href="#type-version">version</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>version_to_string version</code> is <code>string</code>, the string representation of the <code>version</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-string_to_version" class="anchored"><a href="#val-string_to_version" class="anchor"></a><code><span><span class="keyword">val</span> string_to_version : <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-version">version</a> option</span></span></code></div><div class="spec-doc"><p><code>string_to_version string</code> is <code>version</code>, the <code>version</code> matching the string (<code>None</code> if none matches).</p></div></div><div class="odoc-spec"><div class="spec value" id="val-all_versions" class="anchored"><a href="#val-all_versions" class="anchor"></a><code><span><span class="keyword">val</span> all_versions : <span><a href="#type-version">version</a> list</span></span></code></div><div class="spec-doc"><p><code>all_versions</code> returns a list of all supported versions.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-config" class="anchored"><a href="#type-config" class="anchor"></a><code><span><span class="keyword">type</span> config</span><span> = </span><span>{</span></code><table><tr id="type-config.policies" class="anchored"><td class="def record field"><a href="#type-config.policies" class="anchor"></a><code><span>policies : <span><a href="#type-policy">policy</a> list</span>;</span></code></td></tr><tr id="type-config.versions" class="anchored"><td class="def record field"><a href="#type-config.versions" class="anchor"></a><code><span>versions : <span><a href="#type-version">version</a> list</span>;</span></code></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p>OTR configuration consisting of a set of policies and versions.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-sexp_of_config" class="anchored"><a href="#val-sexp_of_config" class="anchor"></a><code><span><span class="keyword">val</span> sexp_of_config : <span><a href="#type-config">config</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Sexplib0</span>.Sexp.t</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-config_of_sexp" class="anchored"><a href="#val-config_of_sexp" class="anchor"></a><code><span><span class="keyword">val</span> config_of_sexp : <span><span class="xref-unresolved">Sexplib0</span>.Sexp.t <span class="arrow">&#45;&gt;</span></span> <a href="#type-config">config</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-config" class="anchored"><a href="#val-config" class="anchor"></a><code><span><span class="keyword">val</span> config : <span><span><a href="#type-version">version</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-policy">policy</a> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-config">config</a></span></code></div><div class="spec-doc"><p><code>config versions policies</code> is <code>config</code>, the configuration with the given <code>versions</code> and <code>policies</code>.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-session" class="anchored"><a href="#type-session" class="anchor"></a><code><span><span class="keyword">type</span> session</span></code></div><div class="spec-doc"><p>An abstract OTR session</p></div></div><div class="odoc-spec"><div class="spec value" id="val-session_to_string" class="anchored"><a href="#val-session_to_string" class="anchor"></a><code><span><span class="keyword">val</span> session_to_string : <span><a href="#type-session">session</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>session_to_string session</code> is <code>string</code>, the string representation of the <code>session</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-version" class="anchored"><a href="#val-version" class="anchor"></a><code><span><span class="keyword">val</span> version : <span><a href="#type-session">session</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-version">version</a></span></code></div><div class="spec-doc"><p><code>version session</code> is <code>version</code>, the current active protocol version of this <code>session</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-is_encrypted" class="anchored"><a href="#val-is_encrypted" class="anchor"></a><code><span><span class="keyword">val</span> is_encrypted : <span><a href="#type-session">session</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>is_encrypted session</code> is <code>true</code> if the session is established.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-their_dsa" class="anchored"><a href="#val-their_dsa" class="anchor"></a><code><span><span class="keyword">val</span> their_dsa : <span><a href="#type-session">session</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Mirage_crypto_pk</span>.Dsa.pub option</span></span></code></div><div class="spec-doc"><p><code>their_dsa session</code> is <code>dsa</code>, the public DSA key used by the communication partner (if the session is established).</p></div></div><div class="odoc-spec"><div class="spec value" id="val-new_session" class="anchored"><a href="#val-new_session" class="anchor"></a><code><span><span class="keyword">val</span> new_session : <span><a href="#type-config">config</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Mirage_crypto_pk</span>.Dsa.priv <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="arrow">&#45;&gt;</span></span> <a href="#type-session">session</a></span></code></div><div class="spec-doc"><p><code>new_session configuration dsa ()</code> is <code>session</code>, a fresh session given the <code>configuration</code> and <code>dsa</code> private key.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-update_config" class="anchored"><a href="#val-update_config" class="anchor"></a><code><span><span class="keyword">val</span> update_config : <span><a href="#type-config">config</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-session">session</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-session">session</a></span></code></div><div class="spec-doc"><p><code>update_config config session</code> is <code>session</code>, the <code>session</code> adjusted to the <code>config</code>. Note: the <code>session</code> might not conform to the config anymore!</p></div></div></div></body></html>